GLIB_CFLAGS = @GLIB_CFLAGS@
GLIB_CONFIG = @GLIB_CONFIG@
GLIB_LIBS = @GLIB_LIBS@
GMIME_CONFIG = gmime-config
GMIME_CFLAGS = `$(GMIME_CONFIG) --cflags`
GMIME_LIBS = `$(GMIME_CONFIG) --libs`

HEADER_FILES=config.h ../mdb/util.h formatters.h

CPPFLAGS=@CPPFLAGS@ $(GMIME_CFLAGS) $(shell xml2-config --cflags) $(shell xslt-config --cflags) -g -O3
LDFLAGS=@LDFLAGS@ $(GMIME_LIBS) $(shell xml2-config --libs) $(shell xslt-config --libs) -lcompface
CC = @CC@ $(CPPFLAGS)

all: weft

weft.o: weft.c config.h

formatters.o: formatters.c config.h

transform.o: transform.c config.h

#stripHtml.o: stripHtml.c

weft: weft.o formatters.o transform.o striphtml.o
	$(CC) $(CPPFLAGS) -o weft $(LDFLAGS) weft.o formatters.o transform.o

clean:
	$(RM) indexer *.o

TAGS: *.h *.c
	etags *.[ch]
